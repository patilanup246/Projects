import requests
from pyquery import PyQuery
import time
# url = "https://www.sgpbusiness.com/company/Try-And-Review-Pte-Ltd"

headers = {
    'accept': "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
    'accept-encoding': "gzip, deflate, br",
    'accept-language': "en-US,en;q=0.9",
    'cache-control': "no-cache",
    'upgrade-insecure-requests': "1",
    'user-agent': "i am god"
    }
urls = []
foo = ['103.55.69.242:53281',
'200.37.16.250:8080',
'190.11.32.94:53281',
'185.158.127.9:53281',
'163.172.86.64:3128',
'78.36.43.79:8080',
'167.99.12.149:3128',
'159.89.191.201:3128',
'92.53.73.138:8118',
'118.70.79.124:8080',
'89.22.175.42:8080',
'192.99.0.19:808',
'182.253.178.200:3128',
'45.77.119.206:8170',
'5.196.169.98:3128',
'91.234.224.18:65103',
'79.226.62.33:8080',
'104.207.144.204:3128',
'162.218.209.91:80',
'159.65.0.210:3128',
'45.32.193.119:8118',
'159.65.145.235:8080',
'159.65.108.125:3128',
'154.117.159.42:53281',
'159.89.133.123:3128',
'58.26.10.67:8080',
'167.114.27.15:80',
'153.149.171.53:3128',
'93.188.162.77:3128',
'159.65.179.31:3128',
'47.206.51.67:8080',
'80.211.11.90:53',
'151.80.140.233:54566',
'170.80.44.210:8080',
'212.237.58.29:8080',
'51.15.86.88:3128',
'94.130.14.146:31288',
'147.75.113.107:8080',
'35.204.161.98:3128',
'147.135.210.114:54566',
'138.185.153.190:53281',
'78.49.5.150:8080',
'37.61.218.154:3128',
'198.245.55.199:80',
'80.211.189.165:3128',
'89.236.17.106:3128',
'185.18.114.187:53281',
'103.63.108.6:3128',
'182.16.175.9:53281',
'139.255.57.32:8080',
'35.173.47.232:80',
'103.248.248.235:53281',
'213.6.40.142:80',
'192.116.142.153:8080',
'86.63.119.32:53281',
'103.92.142.183:53281',
'116.58.227.40:62225',
'212.49.115.67:8080',
'77.52.188.230:3128',
'152.231.81.122:53281',
'43.252.18.231:45619',
'159.65.9.66:3128',
'194.126.183.141:53281',
'64.56.67.138:8080',
'188.232.150.97:53281',
'171.97.69.100:8080',
'103.215.200.166:8080',
'66.82.123.234:8080',
'42.104.84.109:8080',
'122.183.137.190:8080',
'136.24.133.49:52225',
'80.90.228.170:31588',
'159.89.192.39:3128',
'91.210.98.174:3128',
'177.89.149.121:53281',
'122.183.139.109:8080',
'207.32.30.20:8080',
'151.237.210.199:53281',
'195.190.124.202:8080',
'66.193.71.212:8080']
import random
prox = random.choice(foo)
http_proxy  = "http://"+prox
https_proxy = "https://"+prox
ftp_proxy   = "ftp://"+prox

proxyDict = { 
          "http"  : http_proxy, 
          "https" : https_proxy, 
          "ftp"   : ftp_proxy
        }
r_all = requests.get('https://www.sgpbusiness.com/category/Accounting-Firms', headers=headers).text
print (r_all)
pq_all = PyQuery(r_all)

for p in pq_all('.list-group a'):
    urls.append(p.attrib['href'])
print (urls)
for url in urls:
    try:
        prox = random.choice(foo)
        http_proxy  = "http://"+prox
        https_proxy = "https://"+prox
        ftp_proxy   = "ftp://"+prox
        
        proxyDict = { 
                  "http"  : http_proxy, 
                  "https" : https_proxy, 
                  "ftp"   : ftp_proxy
                }
    
        r = requests.get(url, headers=headers)
        
        response = requests.request("GET", url, headers=headers)
        pq = PyQuery(response.text)
    
        print ('Name - '+pq('.row h1').text())
        time.sleep(5)
    except: 
        pass